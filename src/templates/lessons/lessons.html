{% if current_user.is_authenticated and current_user.role == 'giangvien' %} {%
extends "base_lecturer.html" %} {% else %} {% extends "base.html" %} {% endif %}
{% block title %}Bài học{% endblock %} {% block content %}
<div class="max-w-4xl mx-auto px-4 py-12">
  <h2 class="text-3xl font-extrabold text-white mb-10 flex items-center gap-3">
    <svg
      class="w-8 h-8 text-blue-500"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M12 20l9-5-9-5-9 5 9 5zm0 0v-6m0 6V4m0 0L3 9m9-5l9 5"
      />
    </svg>
    Danh sách bài học
  </h2>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    {% for lesson in lessons %}
    <div
      class="bg-zinc-900 rounded-2xl shadow-xl p-6 flex flex-col gap-4 card-hover border border-zinc-700"
    >
      <div class="flex items-center gap-3">
        <div class="flex-shrink-0">
          <span
            class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-blue-700 text-white text-lg font-bold"
          >
            {{ loop.index }}
          </span>
        </div>
        <div class="flex-1">
          <div class="text-xl font-semibold text-white">{{ lesson.title }}</div>
        </div>
        <!-- Chỉ hiển thị nút sửa/xóa cho giảng viên là người tạo -->
      </div>
      <div class="flex justify-end gap-2">
        {% if current_user.is_authenticated and current_user.role == 'giangvien'
        and lesson.created_by == current_user.id %}
        <a
          href="{{ url_for('lessons.edit_lesson', lesson_id=lesson.id) }}"
          class="px-4 py-2 rounded-lg bg-yellow-600 hover:bg-yellow-700 text-white font-bold shadow transition"
        >
          Sửa
        </a>
        <form
          method="POST"
          action="{{ url_for('lessons.delete_lesson', lesson_id=lesson.id) }}"
          style="display: inline"
        >
          <button
            type="submit"
            onclick="return confirm('Bạn có chắc muốn xóa bài học này?');"
            class="px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-bold shadow transition"
          >
            Xóa
          </button>
        </form>
        {% elif current_user.is_authenticated and current_user.role ==
        'sinhvien' %}
        <form method="POST" action="#">
          <button
            type="submit"
            class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-bold shadow transition"
          >
            Đăng ký bài học
          </button>
        </form>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
