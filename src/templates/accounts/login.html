{% extends "base.html" %} {% block content %}
<div class="min-h-screen flex items-center justify-center bg-black py-12 px-4">
  <div
    class="w-full max-w-md bg-zinc-900 rounded-2xl shadow-2xl p-10 border border-zinc-800"
  >
    <div class="text-center mb-8">
      <img
        class="mx-auto h-14 w-14 rounded-full border-2 border-white shadow-lg"
        src="https://placehold.co/56x56/000/fff?text=Py"
        alt="PyMaster logo"
      />
      <h2 class="mt-6 text-3xl font-extrabold text-white tracking-tight">
        Đăng nhập
      </h2>
      <!-- Đã chuyển link đăng ký xuống dưới -->
    </div>
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div class="mb-6 flex flex-col items-center">
      {% for category, message in messages %} {% if message != 'Please log in to
      access this page.' and message != 'Login successful!' and message != 'Đăng
      nhập thành công!' %} {% set msg_vi = message %} {% if message == 'You have
      been logged out' or message == 'Bạn đã đăng xuất' %} {% set msg_vi = 'Bạn
      đã đăng xuất.' %} {% elif message == 'Invalid username or password' or
      message == 'Tên đăng nhập hoặc mật khẩu không đúng' %} {% set msg_vi =
      'Tên đăng nhập hoặc mật khẩu không đúng' %} {% endif %}
      <span
        class="inline-block px-4 py-2 rounded-lg text-sm font-semibold text-center mb-2"
        style="
                  background: transparent;
                  {% if category == 'success' %}color:#22c55e;
                  {% elif category == 'error' or category == 'danger' %}color:#ef4444;
                  {% else %}color:#fff;
                  {% endif %}"
      >
        {{ msg_vi }}
      </span>
      {% endif %} {% endfor %}
    </div>
    {% endif %} {% endwith %}
    <form class="space-y-6" method="POST" novalidate>
      {{ form.csrf_token }}
      <div class="space-y-5">
        <div>
          <label
            for="{{ form.username.id }}"
            class="block text-sm font-medium text-zinc-200"
            >Tên đăng nhập</label
          >
          {{ form.username(class="mt-1 block w-full px-3 py-2 bg-zinc-800 border
          border-zinc-700 rounded-md text-white placeholder-zinc-500
          focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm",
          placeholder="Nhập tên đăng nhập") }} {% for error in
          form.username.errors %} {% set error_vi = error %} {% if error ==
          'This field is required.' %} {% set error_vi = 'Trường này là bắt
          buộc.' %} {% endif %}
          <span
            class="inline-block px-4 py-2 rounded-lg text-xs font-semibold text-center mb-2"
            style="background: #ef4444; color: #fff"
            >{{ error_vi }}</span
          >
          {% endfor %}
        </div>
        <div>
          <label
            for="{{ form.password.id }}"
            class="block text-sm font-medium text-zinc-200"
            >Mật khẩu</label
          >
          {{ form.password(class="mt-1 block w-full px-3 py-2 bg-zinc-800 border
          border-zinc-700 rounded-md text-white placeholder-zinc-500
          focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm",
          placeholder="Nhập mật khẩu") }} {% for error in form.password.errors
          %} {% set error_vi = error %} {% if error == 'This field is required.'
          %} {% set error_vi = 'Trường này là bắt buộc.' %} {% endif %}
          <span
            class="inline-block px-4 py-2 rounded-lg text-xs font-semibold text-center mb-2"
            style="background: #ef4444; color: #fff"
            >{{ error_vi }}</span
          >
          {% endfor %} {% if login_error %}
          <span
            class="inline-block px-4 py-2 rounded-lg text-xs font-semibold text-center mb-2"
            style="background: #ef4444; color: #fff"
            >{{ login_error }}</span
          >
          {% endif %}
        </div>
        <div class="flex items-center">
          {{ form.remember(class="h-4 w-4 text-blue-500 focus:ring-blue-500
          border-zinc-700 rounded") }}
          <label
            for="{{ form.remember.id }}"
            class="ml-2 block text-sm text-zinc-300"
            >Ghi nhớ đăng nhập</label
          >
        </div>
      </div>
      <div>
        <button
          type="submit"
          class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-lg transition"
        >
          Đăng nhập
        </button>
      </div>
      <div class="mt-6 text-center text-sm text-zinc-400">
        Chưa có tài khoản?
        <a
          href="{{ url_for('accounts.register') }}"
          class="text-blue-400 hover:text-blue-200 font-semibold underline"
          >Đăng ký ngay</a
        >
      </div>
    </form>
  </div>
</div>
{% endblock %}
